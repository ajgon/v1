function getMouseCoordsWithinEventTarget(e){var t={x:0,y:0};if(e){for(var i=e.target,o=0,s=0;i.offsetParent;)o+=i.offsetLeft+("Opera"==navigator.appName?i.parentNode.offsetLeft:0),s+=i.offsetTop+("Opera"==navigator.appName?i.parentNode.offsetTop:0),i=i.offsetParent;t.x=e.pageX-o,t.y=e.pageY-s}else e=window.event,t.x=e.offsetX,t.y=e.offsetY;return t}var SliderShow={initialize:function(){this.result="",new Element("span").setProperty("id","sliderLeft").injectBefore($("slider")),new Element("span").setProperty("id","sliderRight").injectAfter($("slider")),$("branding").setStyle("padding-bottom","10px"),$("slider").setStyles({height:"150px",overflow:"hidden"}),$A($("slides").getElementsByTagName("li")).each(function(e){$(e.firstChild.firstChild).setOpacity(1),$(e).firstChild.setAttribute("href","javascript: void(0)"),new Element("span").setOpacity("Konqueror"==navigator.appName?0:.7).setStyles({display:"block",position:"absolute",left:"0px",top:"0px",width:"150px",height:"150px","background-color":"#000000",cursor:"pointer"}).injectBefore(e.firstChild),e.addEvent("click",function(){this.receiveDetail(e.id)}.bind(this))}.bind(this)),$("sliderLeft").onmouseover=function(e){this.moveSlider.moveRight()}.bind(this),$("sliderLeft").onmouseout=function(e){this.moveSlider.stop()}.bind(this),$("sliderRight").onmouseover=function(e){this.moveSlider.moveLeft()}.bind(this),$("sliderRight").onmouseout=function(e){this.moveSlider.stop()}.bind(this);var e=$A($("slides").getElementsByTagName("span"));e.each(function(e){var t=new Fx.Style(e,"opacity",{duration:500,wait:!1});e.addEvent("mouseover",function(){t.start(e.getStyle("opacity"),0)}).addEvent("mouseout",function(){t.start(e.getStyle("opacity"),.7)})}),this.moveSlider.timer=null},moveSlider:{speed:10,move1pxLeft:function(){parseInt($("slides").getStyle("left"))>=-(parseInt($("slides").getStyle("width"))-parseInt($("slider").getStyle("width"))-this.speed)?$("slides").setStyle("left",parseInt($("slides").getStyle("left"))-this.speed+"px"):this.stop()},move1pxRight:function(){parseInt($("slides").getStyle("left"))<=-this.speed?$("slides").setStyle("left",parseInt($("slides").getStyle("left"))+this.speed+"px"):this.stop()},moveLeft:function(){this.stop(),this.timer=setInterval(this.move1pxLeft.bind(this),1)},moveRight:function(){this.stop(),this.timer=setInterval(this.move1pxRight.bind(this),1)},stop:function(){null!=this.timer&&clearInterval(this.timer)}},receiveDetail:function(e){new Element("div").setProperty("id","mask").setOpacity(.6).injectAfter($("wrapper")),"Konqueror"==navigator.appName&&$("mask").setStyles({"background-color":"transparent","background-image":"url(/images/konqueror-mask.png)","background-repeat":"repeat"}),new Element("div").setProperty("id","indicator").injectAfter($("mask")),new Ajax("ajax/"+e+".js",{method:"get",onComplete:function(e){this.showDetail(e)}.bind(this)}).request()},showDetail:function(strResponse){var detail=new Element("div").setProperty("id","detail");detail.injectAfter($("mask")),eval(strResponse),$("close").addEvent("click",function(){document.body.removeChild($("mask")),isIe?document.body.removeChild($("detail-ie6")):document.body.removeChild($("detail"))}.bind(this)),$("thumb").onmousemove=this.showZoom,isIe?($("detail").removeChild($("detail").firstChild),$("detail").removeChild($("detail").lastChild),new Element("div").setProperty("id","detail-ie6").injectBefore("detail"),detailold=$("detail"),$("detail").parentNode.removeChild($("detail")),detailold.injectInside($("detail-ie6")),new Element("span").setProperty("class","top").injectBefore($("detail")),new Element("span").setProperty("class","bottom").injectAfter($("detail")),$("detail-ie6").setStyle("margin-top",-(Math.round($("detail-ie6").offsetHeight/2)+12)+"px")):detail.setStyle("margin-top",-(Math.round(detail.offsetHeight/2)+12)+"px"),document.body.removeChild($("indicator"))},showZoom:function(e){var t=getMouseCoordsWithinEventTarget(e),i=$("bigpreview").offsetWidth,o=$("bigpreview").offsetHeight,s=Math.round(99-i*t.x/368),n=Math.round(70-o*t.y/292);s=-i+198>s?-i+198:s>0?0:s,n=-o+140>n?-o+140:n>0?0:n,$("bigpreview").setStyle("left",s+"px"),$("bigpreview").setStyle("top",n+"px")}};window.onDomReady(function(e){isIe="-1"!=navigator.appVersion.indexOf("MSIE 6.0"),SliderShow.initialize()});